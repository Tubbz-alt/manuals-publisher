<div class="col-md-8">
  <%= form_for document do |f| %>
    <%= render partial: "shared/form_errors", locals: { object: document } %>

    <%= f.text_field :title %>
    <%= f.text_area :summary, class: 'short-textarea' %>
    <%= f.text_area :body %>

    <div class="preview_button"></div>
    <div class="preview_container" style="display: none;"></div>

    <%= f.text_field :date_of_occurrence, placeholder: '2012-04-23' %>
    <%= f.text_field :aircraft_type %>
    <%= f.text_field :registration %>
    <%= f.text_field :location %>
    <%= f.select :aircraft_category, f.object.facet_options(:aircraft_category), {}, { class: 'select2', multiple: true, data: {placeholder: 'Select an Aircraft category'} } %>
    <%= f.select :report_type, f.object.facet_options(:report_type) %>


    <div class="actions">
      <button name="save" class="btn btn-success">Save as draft</button>
    </div>
  <% end %>
</div>

<%= render partial: "specialist_documents/attachments_form", locals: { document: document } %>

<%= content_for :document_ready do %>
  window.SpecialistDocument.addPreviewFeature({
    'url'             : '<%= preview_path_for_aaib_report(document) %>',
    'insert_into'     : '.preview_container',
    'insert_button'   : '.preview_button',
    'render_to'       : '.preview .govspeak',
    'data_target'     : function() {
                          return {
                            'aaib_report' : {
                              'body' : $('#aaib_report_body').val()
                            }
                          };
                        }
  });
<% end -%>
